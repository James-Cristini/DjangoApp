{% extends 'forge/base.html' %}
{% load static %}
{% block title %}
- World Detail
{% endblock %}
{% block content %}
{% if world.is_public or is_user %}
  <div class='container'>
    <h1>{{ world.name }}
        {% if is_user %}
        <a href="{% url 'update_world' world.pk user_obj.username world.name %}">(Edit)</a>
        {% endif %}
    </h1>
    <img src="{{ world.image.url }}">
    <small>{{ world.genre }}</small>
    <p>{{ world.description }}</p>
    <p>{{ world.story }}</p>
  </div>
  <hr/>
  <div class="container">
      <a href="{% url 'world_index' user_obj.username %}" style='text-decoration: none'><button>{{ user_obj.username }}'s worlds</button></a>
      <a href="{% url 'category_index' user_obj.username world.name %}" style='text-decoration: none'><button>All Categories</button></a>
  </div>
  <hr/>
  <div class="container">
    <h4>Tiles</h4>
    <div class="row">
      {% for tile in tiles %}
        <div class="mb-1 mr-1">
          <a href="{% url 'tile_detail' user_obj.username world.name tile.name %}">
            <img src="{{ tile.image_thumb.url }}" title="{{ tile.name }}">
          </a>
        </div>
      {% endfor %}
      {% if is_user %}
      <div class="mb-1 mr-1">
        <a href="{% url 'create_tile' user_obj.username world.name %}">
            <img src="{% static 'forge/add_item.png' %}" title="New Tile">
        </a>
      </div>
      {% endif %}
    </div>
  </div>
  <hr/>
  {% for category in categories %}
    <div class="container mb-1 mr-1">
      <a href="{% url 'category_detail' user_obj.username world.name category.name %}">
          <h4 style="text-decoration:none">{{ category.name }}</h4>
      </a>
      <div class="row">
      {% for thing in things %}
        {% if thing.category == category %}
        <div class="mb-1 mr-1">
          <a href="{% url 'thing_detail' user_obj.username world.name category.name thing.name %}">
            <img src="{{ thing.image_thumb.url }}" title="{{ thing.name }}">
          </a>
        </div>
        {% endif %}
      {% endfor %}
      {% if is_user %}
        <div class="mb-1 mr-1">
          <a href="{% url 'create_thing' user_obj.username world.name 'created_from_world' category.name %}"> <!--   -->
            <img src="{% static 'forge/add_item.png' %}" title="New Thing">
          </a>
        </div>
      {% endif %}
      </div>
    </div>
    <hr/>
  {% endfor %}
  {% if is_user %}
<hr/>
<div class="container">
  <a href="{% url 'create_category' user.username world.name 'created_from_world' %}">
    <img src="{% static 'forge/add_item.png' %}" title="New Category">
  </a>
</div>
<hr/>
</br>
<div class="container">
  <h2><a href="{% url 'delete_world' world.pk user_obj.username world.name %}"> Delete {{ world.name }}</a></h2>
</div>
</br>
  {% endif %}

{% else %}
<h2> This world is set to private</h2>
{% endif %}
{% endblock %}